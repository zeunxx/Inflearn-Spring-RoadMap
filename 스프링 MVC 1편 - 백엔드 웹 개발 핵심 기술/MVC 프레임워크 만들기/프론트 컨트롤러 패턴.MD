## 프론트 컨트롤러 패턴 소개


### 프론트 컨트롤러

- 도입 전
    <img width="354" alt="image" src="https://user-images.githubusercontent.com/81572478/230089201-2df7f677-57ba-478c-af29-3ad2e167a865.png">

- 도입 후
    <img width="348" alt="image" src="https://user-images.githubusercontent.com/81572478/230089410-2447a4c1-cdf7-40f3-aadb-b825b1157020.png">

<BR>

✅ **FrontController 패턴 특징**
- 프론트 컨트롤러 서블릿 하나로 클라이언트의 요청을 받음
- 프론트 컨트롤러가 요청에 맞는 컨트롤러 찾아서 호출
- 입구를 하나로!
- 공통 처리 기능
- 프론트 컨트롤러를 제외한 나머지 컨트롤럴는 서블릿을 사용하지 않아도 됨

<br>

**스프링 웹 MVC**와 **프론트 컨트롤러**

스프링 웹 MVC의 핵심도 바로 **FrontController**

스프링 웹 MVC의 **DispatcherServlet**이 FrontController 패턴으로 구현되어 있음

<br><Br>

### 프론트 컨트롤러 도입 - v1

<img width="347" alt="image" src="https://user-images.githubusercontent.com/81572478/230090572-a801afa3-e3dc-4946-bd42-e447ecafbfa3.png">

<br>

```
@WebServlet(name = "frontControllerServletV1", urlPatterns = "/front-controller/V1/*")
public class FrontControllerServletV1 extends HttpServlet{

    private Map<String, ControllerV1> controllerMap = new HashMap<>();

    public FrontControllerServletV1() {
        controllerMap.put("/front-controller/V1/members/new-form", new MemberFormControllerV1());
        controllerMap.put("/front-controller/V1/members/save", new MemberSaveControllerV1());
        controllerMap.put("/front-controller/V1/members", new MemberListControllerV1());
    }

    @Override
    protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        String requestURI = request.getRequestURI();
        ControllerV1 controller = controllerMap.get(requestURI);
        if (controller == null){
            response.setStatus(HttpServletResponse.SC_NOT_FOUND);
            return;
        }

        controller.process(request,response);
    }
}
```

✅ **프론트 컨트롤러 분석**

- urlPatterns
    - `urlPatterns = "/front-controller/v1/*"` : `front-controller/v1` 를 포함한 하위 모든 요청은
이 서블릿에서 받아들인다.
    - 예) `/front-controller/v1` , `/front-controller/v1/a `, `/front-controller/v1/a/b`

<br>

- controllerMap
    - key : 매핑 URL
    - value : 호출될 컨트롤러

- service()

    먼저 requestURI 를 조회해서 실제 호출할 컨트롤러를 controllerMap 에서 찾는다. 만약 없다면
    404(SC_NOT_FOUND) 상태 코드를 반환한다.

    컨트롤러를 찾고 controller.process(request, response); 을 호출해서 해당 컨트롤러를 실행한다

- JSP
    JSP는 이전 MVC에서 사용했던 것 그대로!