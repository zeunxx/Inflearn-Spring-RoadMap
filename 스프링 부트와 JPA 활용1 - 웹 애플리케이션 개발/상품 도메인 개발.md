
### Item ë„ë©”ì¸ì— ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì¶”ê°€
```
@Entity
public abstract class Item {

    ...
    private int stockQuantity; 

    //==ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§==//

    /**
     * stock ì¦ê°€
     */
    public void addStock(int quantity){
        this.stockQuantity += quantity;
    }
    /**
     * stock ê°ì†Œ
     */
    public void removeStock(int quantity){
        int restStock = this.stockQuantity - quantity;
        if(restStock<0){ //ë‚¨ì€ ìˆ˜ëŸ‰ì´ 0ë³´ë‹¤ ì ìœ¼ë©´ exception ë°œìƒ
            throw new NotEnoughStockException("need more stock");
        }
        this.stockQuantity = restStock; // ì˜ˆì™¸ ì•ˆí„°ì§€ë©´ ë‚¨ì€ ìˆ˜ëŸ‰ìœ¼ë¡œ set
    }
}
```
- stockQuantityë¼ëŠ” ë©¤ë²„ë¥¼ ê°€ì§€ëŠ” ì—”í‹°í‹° ì•ˆì— ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ìˆëŠ”ê²Œ ì‘ì§‘ë„ê°€ ë†’ìŒ

    > ë³´í†µ ê°œë°œí• ë•Œ ItemServiceì—ì„œ stockì„ ë”í•˜ê³  ë“± í•´ì„œ Item.setStockQuantityë¡œ setí•˜ëŠ” ê²½ìš°ê°€ ë§ìŒ.
    but, ê°ì²´ ì§€í–¥ì ìœ¼ë¡œ ìƒê°í•˜ë©´ **dataë¥¼ ê°€ì§€ê³  ìˆëŠ”ìª½ì—(Item ì—”í‹°í‹°) ë¹„ì¦ˆë‹ˆìŠ¤ ë©”ì†Œë“œë¥¼ ê°€ì§€ê³  ìˆëŠ”ê²Œ** ê°€ì¥ ì¢‹ìŒ!(ì‘ì§‘ë ¥ ì¦ê°€)

    â¡ï¸ setterë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì•„ë‹˜!!


<br>
<Br>

### Item Repositiry ê°œë°œ
```
@Repository
@RequiredArgsConstructor
public class ItemRepository {
    
    private final EntityManager em;
    
    public void save(Item item){
        if(item.getId()==null){
            // itemì´ ì²˜ìŒ ë“¤ì–´ì˜¬ë•(JPAì— ì €ì¥í•˜ê¸° ì „ê¹Œì§€) idê°€ ì—†ì–´ì„œ persist == ì™„ì „íˆ ìƒˆë¡œ ìƒì„±í•œ ê°ì²´
            em.persist(item);
        }else{
            // ì´ë¯¸ dbì— ë“±ë¡ëœ ê±¸ ê°€ì ¸ì˜´(updateì™€ ë¹„ìŠ·í•˜ê²Œ ìƒê°)
            em.merge(item);
        }
    }
    
    public Item findOne(Long id){
        return em.find(Item.class, id);
    }
    
    public List<Item> findAll(){
        return em.createQuery("select i from Item i",Item.class)
                .getResultList();
    }
}
```


<br>
ğŸ’¡ ê¶ê¸ˆí•œ ì :
í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë„ë©”ì¸ ì•ˆì— ë§Œë“¤ë©´ ì„œë¹„ìŠ¤ì—ëŠ” ë ˆí¬ì§€í† ë¦¬ ìœ„ì„ì„ í•˜ê¸°ìœ„í•œ ë©”ì†Œë“œë§Œ ë§Œë“œëŠ” ê²ƒì¸ê°€?