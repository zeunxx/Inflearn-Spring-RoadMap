### ìš”êµ¬ì‚¬í•­ ë¶„ì„ í†µí•œ ë„ë©”ì¸ ë¶„ì„

<img width="456" alt="image" src="https://user-images.githubusercontent.com/81572478/210198929-4bd0efdf-1510-4d9f-8bc2-149d63577fa3.png">

- order - oderItem : 1ëŒ€N ê´€ê³„

     í•˜ë‚˜ì˜ ì£¼ë¬¸ ë‚´ì—ì„œ í•œ ìƒí’ˆì„ ì—¬ëŸ¬ê°œ êµ¬ë§¤í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ
- orderItem - Item : NëŒ€1 ê´€ê³„
     í•˜ë‚˜ì˜ ìƒí’ˆì„ í•œë²ˆì˜ ì£¼ë¬¸ì—ì„œ ì—¬ëŸ¬ê°œ êµ¬ë§¤í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ

    -> ì›ë˜ order - orderItem = NëŒ€N ê´€ê³„ì´ë¯€ë¡œ 1ëŒ€ë‹¤, ë‹¤ëŒ€1ë¡œ í’€ì–´ëƒ„

- category - Item : NëŒ€N ê´€ê³„
    BUT ì‹¤ì œ ì“¸ë•ŒëŠ” ìœ„ì²˜ëŸ¼ í’€ì–´ë‚´ì•¼í•¨!    


<br>

âœ… ê°€ê¸‰ì ìœ¼ë¡œëŠ” ì–‘ë°©í–¥ ê´€ê³„ë³´ë‹¨ ë‹¨ë°©í–¥ ê´€ê³„ê°€ ì¢‹ìŒ!

ì°¸ê³ : íšŒì›ì´ ì£¼ë¬¸ì„ í•˜ê¸° ë•Œë¬¸ì—, íšŒì›ì´ ì£¼ë¬¸ë¦¬ìŠ¤íŠ¸ë¥¼ ê°€ì§€ëŠ” ê²ƒì€ ì–¼í• ë³´ë©´ ì˜ ì„¤ê³„í•œ ê²ƒ ê°™ì§€ë§Œ, ê°ì²´
ì„¸ìƒì€ ì‹¤ì œ ì„¸ê³„ì™€ëŠ” ë‹¤ë¥´ë‹¤. 

ì‹¤ë¬´ì—ì„œëŠ” íšŒì›ì´ ì£¼ë¬¸ì„ ì°¸ì¡°í•˜ì§€ ì•Šê³ , ì£¼ë¬¸ì´ íšŒì›ì„ ì°¸ì¡°í•˜ëŠ” ê²ƒìœ¼ë¡œ
ì¶©ë¶„í•˜ë‹¤.

â¡ï¸ ì£¼ë¬¸ì„ ìƒì„±í• ë•Œ íšŒì› ì •ë³´ê°€ í•„ìš”í•œ ê²ƒ! ë”°ë¼ì„œ ORDERê°€ MEMBERë¥¼ ì°¸ì¡°!

<br><br>

### íšŒì› í…Œì´ë¸” ë¶„ì„

<img width="457" alt="image" src="https://user-images.githubusercontent.com/81572478/210199369-09d7c47b-9e92-4e89-b3a9-55705389d5b9.png">

- ì¹´í…Œê³ ë¦¬ì™€ ì•„ì´í…œ
    - categoryì™€ itemì€ ìœ„ì—ì„œ ë‹¤ëŒ€ë‹¤ ê´€ê³„ì˜€ìŒ
    - but ê´€ê³„í˜•DBì—ì„  ê·¸ ê´€ê³„ë¥¼ ì¼ëŒ€ë‹¤, ë‹¤ëŒ€ì¼ë¡œ í’€ì–´ë‚´ì•¼í•¨ 
    - ë”°ë¼ì„œ, category_item í…Œì´ë¸”ì„ ì¶”ê°€

<br><Br>

### ì—°ê´€ê´€ê³„ ë§µí•‘ ë¶„ì„

- íšŒì›ê³¼ ì£¼ë¬¸: ì¼ëŒ€ë‹¤ , ë‹¤ëŒ€ì¼ì˜ ì–‘ë°©í–¥ ê´€ê³„. ë”°ë¼ì„œ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì„ ì •í•´ì•¼ í•˜ëŠ”ë°, ì™¸ë˜ í‚¤ê°€ ìˆëŠ”
ì£¼ë¬¸ì„ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ìœ¼ë¡œ ì •í•˜ëŠ” ê²ƒì´ ì¢‹ìŒ

    - ê·¸ëŸ¬ë¯€ë¡œ Order.member ë¥¼ ORDERS.MEMBER_ID ì™¸ë˜
í‚¤ì™€ ë§¤í•‘
    -> ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ìª½ì—ì„œ ê°’ì„ settingí•´ì•¼ ê°’ì´ ë³€ê²½ë¨ 
    â¡ï¸ memberìª½ì—ì„œì˜ orderëŠ” ì¡°íšŒë§Œ ê°€ëŠ¥

    <br>

- ì£¼ë¬¸ìƒí’ˆê³¼ ì£¼ë¬¸: ë‹¤ëŒ€ì¼ ì–‘ë°©í–¥ ê´€ê³„. ì™¸ë˜ í‚¤ê°€ ì£¼ë¬¸ìƒí’ˆì— ìˆìœ¼ë¯€ë¡œ ì£¼ë¬¸ìƒí’ˆì´ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸. 
ê·¸ëŸ¬ë¯€ë¡œ OrderItem.order ë¥¼ ORDER_ITEM.ORDER_ID ì™¸ë˜ í‚¤ì™€ ë§¤í•‘
    - order_item í…Œì´ë¸”ì˜ order_idê°€ ì™¸ë˜í‚¤ê°€ ë˜ì–´ orderë¥¼ ë§µí•‘

    <br>

- ì£¼ë¬¸ìƒí’ˆê³¼ ìƒí’ˆ: ë‹¤ëŒ€ì¼ ë‹¨ë°©í–¥ ê´€ê³„. OrderItem.item ì„ ORDER_ITEM.ITEM_ID ì™¸ë˜ í‚¤ì™€
ë§¤í•‘
    - itemì€ orderItemì„ ì°¸ì¡°í•  í•„ìš”ê°€ ì—†ìŒ! ë”°ë¼ì„œ, orderItemë§Œ itemì„ ì™¸ë˜í‚¤ë¡œ ì°¸ì¡°


<br>

- ì£¼ë¬¸ê³¼ ë°°ì†¡: ì¼ëŒ€ì¼ ì–‘ë°©í–¥ ê´€ê³„. Order.delivery ë¥¼ ORDERS.DELIVERY_ID ì™¸ë˜ í‚¤ì™€ ë§¤í•‘
    - ì¼ëŒ€ì¼ ê´€ê³„ì´ë¯€ë¡œ ì£¼ë¬¸/ë°°ì†¡ ì–´ëŠìª½ì— ì™¸ë˜í‚¤ë¥¼ ë†“ì„ì§€ëŠ” ê°œë°œì ë§ˆìŒ? ê·¼ë° ì£¼ë¬¸ì— ë†“ëŠ” ê²ƒì´ ì¼ë°˜ì ì¼ê²ƒ ê°™ìŒ ..


<br>

ğŸ“Œ ì°¸ê³ : ì™¸ë˜ í‚¤ê°€ ìˆëŠ” ê³³ì„ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ìœ¼ë¡œ ì •í•´ë¼.
> ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì€ ë‹¨ìˆœíˆ ì™¸ë˜ í‚¤ë¥¼ ëˆ„ê°€ ê´€ë¦¬í•˜ëƒì˜ ë¬¸ì œì´ì§€ ë¹„ì¦ˆë‹ˆìŠ¤ìƒ ìš°ìœ„ì— ìˆë‹¤ê³  ì£¼ì¸ìœ¼ë¡œ ì •í•˜ë©´
ì•ˆëœë‹¤.. ì˜ˆë¥¼ ë“¤ì–´ì„œ ìë™ì°¨ì™€ ë°”í€´ê°€ ìˆìœ¼ë©´, ì¼ëŒ€ë‹¤ ê´€ê³„ì—ì„œ í•­ìƒ ë‹¤ìª½ì— ì™¸ë˜ í‚¤ê°€ ìˆìœ¼ë¯€ë¡œ ì™¸ë˜ í‚¤ê°€
ìˆëŠ” ë°”í€´ë¥¼ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ìœ¼ë¡œ ì •í•˜ë©´ ëœë‹¤. ë¬¼ë¡  ìë™ì°¨ë¥¼ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ìœ¼ë¡œ ì •í•˜ëŠ” ê²ƒì´ ë¶ˆê°€ëŠ¥ í•œ
ê²ƒì€ ì•„ë‹ˆì§€ë§Œ, ìë™ì°¨ë¥¼ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ìœ¼ë¡œ ì •í•˜ë©´ ìë™ì°¨ê°€ ê´€ë¦¬í•˜ì§€ ì•ŠëŠ” ë°”í€´ í…Œì´ë¸”ì˜ ì™¸ë˜ í‚¤ ê°’ì´
ì—…ë°ì´íŠ¸ ë˜ë¯€ë¡œ ê´€ë¦¬ì™€ ìœ ì§€ë³´ìˆ˜ê°€ ì–´ë µê³ , ì¶”ê°€ì ìœ¼ë¡œ ë³„ë„ì˜ ì—…ë°ì´íŠ¸ ì¿¼ë¦¬ê°€ ë°œìƒí•˜ëŠ” ì„±ëŠ¥ ë¬¸ì œë„
ìˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ JPA ê¸°ë³¸í¸ì„ ì°¸ê³ í•˜ì


<br><Br>

### JPA ë‚´ì¥ íƒ€ì…
- @Embeddable
    : Embeddable = ì´ í´ë˜ìŠ¤ëŠ” í´ë˜ìŠ¤ì— í¬í•¨ë  ìˆ˜ ìˆê²Œ í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜
    - Memberì˜ ì •ë³´ì¤‘ì— "ì£¼ì†Œ"ë¥¼ í‘œí˜„í•˜ëŠ” ì¹¼ëŸ¼ë“¤ì´ ìˆìœ¼ë¯€ë¡œ, ì—¬ê¸°ì„œ "ì£¼ì†Œ"ë¼ëŠ” ê°ì²´ë¡œ ë¬¶ì–´ì„œ ê´€ë¦¬


```
    @Entity
    @Getter @Setter
    public class Member {
        @Id
        @GeneratedValue
        @Column(name="member_id")
        private Long Id;

        private String name;

        private Address address;

        private List<Order> orders = new ArrayList<>();
    }

```

```
    @Embeddable
    @Getter
    public class Address {

        private String city;
        private String street;
        private String zipcode;

        protected Address() {
        } // jpa ìŠ¤í™ìƒ ë§Œë“  ìƒì„±ì

        public Address(String city, String street, String zipcode) {
            this.city = city;
            this.street = street;
            this.zipcode = zipcode;
        }
    }

```
<br>

#### ğŸ“Œ ê°’ íƒ€ì… ê°ì²´ Address
:  ê°’ íƒ€ì… ê°ì²´ëŠ” ë³€ê²½ì´ ë¶ˆê°€í•˜ê²Œ ìƒì„±í•´ì•¼ í•¨
> @Setter ë¥¼ ì œê±°í•˜ê³ , ìƒì„±ìì—ì„œ ê°’ì„ ëª¨ë‘ ì´ˆê¸°í™”í•´ì„œ ë³€ê²½ ë¶ˆê°€ëŠ¥í•œ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì. JPA ìŠ¤í™ìƒ
ì—”í‹°í‹°ë‚˜ ì„ë² ë””ë“œ íƒ€ì…( @Embeddable )ì€ ìë°” ê¸°ë³¸ ìƒì„±ì(default constructor)ë¥¼ public ë˜ëŠ”
protected ë¡œ ì„¤ì •í•´ì•¼ í•¨. 
public ìœ¼ë¡œ ë‘ëŠ” ê²ƒ ë³´ë‹¤ëŠ” protected ë¡œ ì„¤ì •í•˜ëŠ” ê²ƒì´ ê·¸ë‚˜ë§ˆ ë”
ì•ˆì „

<Br><Br>

### member - orderì˜ ê´€ê³„

#### 1. Member

```
public class Member {
    @Id
    @GeneratedValue
    @Column(name="member_id")
    private Long Id;

    private String name;

    @Embedded // ìƒëµ ê°€ëŠ¥
    private Address address;

    @OneToMany(mappedBy = "member")
    private List<Order> orders = new ArrayList<>();
}
```

- Memberì™€ orderëŠ” 1ëŒ€ë‹¤ ê´€ê³„
ë”°ë¼ì„œ memberì—ê²Œ orderëŠ” ***ë‹¤*** ì´ë¯€ë¡œ OneToMany

- (mappedBy = "member") : order í…Œì´ë¸”ì— ìˆëŠ” member í•„ë“œì— ë§µí•‘**ëœ** ê²ƒ ë‚˜íƒ€ëƒ„(ì£¼ì¸ì´ ì•„ë‹Œ ì• ë“¤ì´ í‘œì‹œ)

#### 2. Order

```
public class Order {

    @Id
    @GeneratedValue
    @Column(name="order_id")
    private Long id;

    @ManyToOne
    @JoinColumn(name="member_id")
    private Member member;

}
```

- Orderì™€ MemberëŠ” ë‹¤ëŒ€ì¼ ê´€ê³„
ë”°ë¼ì„œ orderì—ê²Œ memberëŠ” ***1*** ì´ë¯€ë¡œ ManyToOne
- @JoinColumn(name="member_id") : ì™¸ë˜í‚¤ ì´ë¦„ = member_id (ì£¼ì¸ì¸ ìª½ì´ ì‘ì„±, ì™¸ë˜í‚¤ ìˆìœ¼ë‹ˆê¹Œ)

<br>

#### 3. Memberì™€ OrderëŠ” ì¼ëŒ€ë‹¤ ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„
- ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì„ ì„¤ì •í•´ì•¼í•¨!
- foreign keyì˜ ê°’ì„ ì—…ë°ì´íŠ¸ í•˜ëŠ” ê°ì²´(ì£¼ì¸)ëŠ” ë‘˜ ì¤‘ í•˜ë‚˜ë§Œ ì„ íƒí•´ì•¼í•¨
- í˜„ì¬ëŠ” ORDER í…Œì´ë¸”ì— member_id ì™¸ë˜í‚¤ê°€ ìˆìŒ
    = orderê°€ ì—°ê´€ê´€ê³„ ì£¼ì¸!

â• ì•ˆê·¸ëŸ¬ë©´ memberì˜ ë­”ê°€ë¥¼ ë°”ê¿¨ëŠ”ë° orderí…Œì´ë¸”ì´ ì—…ë°ì´íŠ¸ ë¨


<br><Br>

### Itemì˜ ìƒì†ê´€ê³„
- Itemë‚´ì—ëŠ” book, movie, albumì´ ìƒì†ê´€ê³„ë¡œ ìˆìŒ
```
@Entity
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(name="dtype")
@Getter @Setter
public abstract class Item {

    @Id
    @GeneratedValue
    @Column(name="item_id")
    private Long id;

    private String name;
    private int price;
    private int stockQuantity; //ì—¬ê¸°ê¹Œì§„ ê³µë™ ì†ì„±
}
```

```
@Entity
@DiscriminatorValue("B")
@Getter
@Setter
public class Book extends Item{
    private String author;
    private String isbn;
}

```

- Itemì€ ì‹±ê¸€ í…Œì´ë¸”ë¡œ í•œë²ˆì— ë‹¤ í•œ í…Œì´ë¸”ì— ë„£ì„ê±°ì„

    â¡ï¸ @Inheritance(strategy = InheritanceType.SINGLE_TABLE)
<img width="112" alt="image" src="https://user-images.githubusercontent.com/81572478/210203247-d60228b7-f2a3-436c-92f0-264aa77c28f1.png">

- Itemì„ DBì— ë„£ì„ë•Œ ì–´ë–¤ íƒ€ì…ì¸ì§€ êµ¬ë¶„í•´ì•¼í•˜ë‹ˆê¹Œ

    â¡ï¸ @DiscriminatorColumn(name="dtype")
    : ë¶€ëª¨ í´ë˜ìŠ¤ì— ì„ ì–¸. í•˜ìœ„ í´ë˜ìŠ¤ë¥¼ êµ¬ë¶„í•˜ëŠ” ìš©ë„ì˜ ì»¬ëŸ¼

    â¡ï¸ @DiscriminatorValue("B")
    
    : book íƒ€ì…ì´ë©´ Bë¡œ êµ¬ë¶„í•œë‹¤ëŠ” ëœ»

â• ì£¼ì˜

- ë¶€ëª¨ í´ë˜ìŠ¤ëŠ” ì¶”ìƒí´ë˜ìŠ¤ë¡œ ì„ ì–¸
- ìì‹ í´ë˜ìŠ¤ì— @Id ë„£ìœ¼ë©´ ì•ˆë¨
- ë¶€ëª¨ í´ë˜ìŠ¤ë¡œ Repository ë§Œë“¤ í•„ìš” ì—†ìŒ

<Br><Br>

### orderì™€ delivery ê´€ê³„
- ì¼ëŒ€ì¼ ì–‘ë°©í–¥ ê´€ê³„

#### 1. order
```
@Entity
@Table(name="orders")
@Getter @Setter
public class Order {
    ...
    
    @OneToOne
    @JoinColumn(name="delivery_id")
    private Delivery delivery;

    ...
}

```


- ë°°ì†¡ë³´ë‹¤ ì£¼ë¬¸ì„ ë” ë§ì´ ì¡°íšŒí•˜ë¯€ë¡œ ì£¼ë¬¸ìª½ì— ì™¸ë˜í‚¤ ì„¤ì •
- orderëŠ” delivey_idë¥¼ foreign keyë¡œ ì¡ê³  ì—°ê´€ê´€ê³„ ì£¼ì¸ì´ ë¨

#### 2. delivery
```
@Entity
@Getter @Setter
public class Delivery {
    ...

    @OneToOne(mappedBy = "delivery")
    private Order order;

    ...

    @Enumerated(EnumType.STRING)
    private DeliveryStatus status; //ë°°ì†¡ìƒíƒœ [READY, COMP]
}
```

- deliveryëŠ” ê±°ìš¸ì´ ë˜ì–´ ì¡°íšŒë§Œ ê°€ëŠ¥, order í…Œì´ë¸”ì˜ deliveryë¡œ ì¡°íšŒ (mappedBy = "delivery")

âœ… enum ì‚¬ìš©ì‹œ  @Enumerated(EnumType.STRING) : stringìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒ ê¶Œì¥!!(ìˆ«ìë¡œ í–ˆë‹¤ê°€ ë‚˜ì¤‘ì— ìƒˆë¡œìš´ íƒ€ì… ì¶”ê°€ì‹œ ê¼¬ì¼ ìˆ˜ ìˆìŒ)



### categoryì™€ itemì˜ ê´€ê³„
- ë‹¤ëŒ€ë‹¤ ê´€ê³„

```
public class Category {

    ...

    @ManyToMany
    @JoinTable(name="category_item")
    private List<Item> items = new ArrayList<>();


}
```
```
public abstract class Item {

    ...

    @ManyToMany(mappedBy = "items")
    private List<Category> categories = new ArrayList<>();
}

```
- @ManyToMany : ë‹¤ëŒ€ë‹¤ ê´€ê³„ 
- @JoinTable(name="category_item") : category_item(ì¤‘ê°„í…Œì´ë¸”)ë¡œ ë§µí•‘
    - ê°ì²´ëŠ” ì–‘ìª½ì— ì»¤ë„¥ì…˜ ê´€ê³„ê°€ ìˆì–´ì„œ ë‹¤ëŒ€ë‹¤ ê´€ê³„ ê°€ëŠ¥í•œë° ê´€ê³„í˜• DBëŠ” ì—†ì–´ì„œ ë¶ˆê°€ëŠ¥(**ì¼ëŒ€ë‹¤ ë‹¤ëŒ€ì¼ë¡œ í’€ì–´ë‚´ëŠ” ì¤‘ê°„ í…Œì´ë¸” í•„ìš”!**)
    
    <br>

    âœ… ì‹¤ì „ì—ì„œ ì“°ì§€ ë§ë¼ëŠ” ì´ìœ : ì–‘ìª½ í…Œì´ë¸”ì˜ ê¸°ë³¸í‚¤ ì™¸ì˜ í•„ë“œ ì¶”ê°€ ë¶ˆê°€ëŠ¥

    > @ManyToMany ëŠ” í¸ë¦¬í•œ ê²ƒ ê°™ì§€ë§Œ, ì¤‘ê°„ í…Œì´ë¸”( CATEGORY_ITEM )ì— ì»¬ëŸ¼ì„ ì¶”ê°€í•  ìˆ˜ ì—†ê³ , ì„¸ë°€í•˜ê²Œ
    ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ê¸° ì–´ë µê¸° ë•Œë¬¸ì— ì‹¤ë¬´ì—ì„œ ì‚¬ìš©í•˜ê¸°ì—ëŠ” í•œê³„ê°€ ìˆë‹¤. ì¤‘ê°„ ì—”í‹°í‹°( CategoryItem ë¥¼
    ë§Œë“¤ê³  @ManyToOne , @OneToMany ë¡œ ë§¤í•‘í•´ì„œ ì‚¬ìš©í•˜ì. ì •ë¦¬í•˜ë©´ ëŒ€ë‹¤ëŒ€ ë§¤í•‘ì„ ì¼ëŒ€ë‹¤, ë‹¤ëŒ€ì¼
    ë§¤í•‘ìœ¼ë¡œ í’€ì–´ë‚´ì„œ ì‚¬ìš©í•˜ì.




<br><Br>

### ì¹´í…Œê³ ë¦¬ì˜ ë¶€ëª¨,ìì‹ ê´€ê³„
```
public class Category {

    ...

    @ManyToOne
    @JoinColumn(name="parent_id")
    private Category parent; // categoryì˜ ë¶€ëª¨(ë¶€ëª¨ëŠ” í•˜ë‚˜ ìì‹ì€ ì—¬ëŸ¿)
    
    
    @OneToMany(mappedBy = "parent")
    private List<Category> child; // categoryì˜ ìì‹(ë¶€ëª¨ëŠ” í•˜ë‚˜ ìì‹ì€ ì—¬ëŸ¿)


}
```

- ë‹¤ë¥¸ entity ë§µí•‘í•˜ë“¯ í•˜ë©´ ë¨

<br><Br>

### âœï¸ ì°¸ê³ ì‚¬í•­

1. ì´ë¡ ì ìœ¼ë¡œ getter, setterë¥¼ ëª¨ë‘ ì œê³µí•˜ì§€ ì•Šê³ , ê¼­ í•„ìš”í•œ ë³„ë„ì˜ ë©”ì†Œë“œë¥¼ ì œê³µí•˜ëŠ”ê²Œ ì´ìƒì 

    but ì‹¤ë¬´ì—ì„œ ì¡°íšŒí•  ì¼ì€ ë§ìœ¼ë¯€ë¡œ getterëŠ” ì—´ì–´ë†“ëŠ”ê²Œ í¸ë¦¬í•¨!

    ğŸ“Œ setterëŠ” ë‹¤ë¦„! ë°ì´í„°ê°€ ë³€í•  ìˆ˜ ìˆìœ¼ë‹ˆê¹Œ!
    ë”°ë¼ì„œ entityë¥¼ ë³€ê²½í• ë• setter ëŒ€ì‹  ë³€ê²½ì§€ì ì´ ëª…í™•í•˜ê²Œ ë³€ê²½ì„ ìœ„í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë©”ì†Œë“œë¥¼ ë³„ë„ë¡œ ì œê³µ!
    â¡ï¸ ìœ ì§€ë³´ìˆ˜ì„± ì¦ê°€

<br>

2. entityì˜ ì‹ë³„ìëŠ” `id`ë¥¼ ì‚¬ìš©í•˜ê³ , pk ì»¬ëŸ¼ëª…ì€ `member_id`ë¥¼ ì‚¬ìš©
    - entityëŠ” íƒ€ì…ì´ ìˆìœ¼ë¯€ë¡œ id í•„ë“œë§Œìœ¼ë¡œ ì‰½ê²Œ êµ¬ë¶„(ì—¬ê¸°ì„œ entity íƒ€ì… member)
    - í…Œì´ë¸”ì€ íƒ€ì…ì´ ì—†ì–´ êµ¬ë¶„ì´ ì–´ë ¤ì›€
        - ê´€ê³„ìƒ `í…Œì´ë¸”ëª…+id` ë§ì´ ì‚¬ìš©

<br>

3. **ëª¨ë“  ì—°ê´€ê´€ê³„ëŠ” ì§€ì—°ë¡œë”©ìœ¼ë¡œ ì„¤ì •!**
    - ì¦‰ì‹œë¡œë”©: í•œ ê°ì²´ë¥¼ ì¡°íšŒí• ë•Œ ì—°ê´€ëœ ë‹¤ë¥¸ ê°ì²´ë„ í•œë²ˆì— ë‹¤ ì¡°íšŒ
    - ì¦‰ì‹œë¡œë”©(EAGER)ì€ ì˜ˆì¸¡ì´ ì–´ë µê³ , ì–´ë–¤ SQLì´ ì‹¤í–‰ë ì§€ ì¶”ì  ì–´ë ¤ì›€ (N+1 ë¬¸ì œ ë°œìƒ)
    - ì‹¤ë¬´ì—ì„œ ëª¨ë“  ì—°ê´€ê´€ê³„ëŠ” **ì§€ì—°ë¡œë”©(LAZY)**ë¡œ ì„¤ì •í•´ì•¼ í•¨
    - ì—°ê´€ëœ ì—”í‹°í‹°ë¥¼ í•¨ê»˜ DBì—ì„œ ì¡°íšŒí•´ì•¼ í•˜ë©´, fetch join ë˜ëŠ” ì—”í‹°í‹° ê·¸ë˜í”„ ê¸°ëŠ¥ ì‚¬ìš©
        - í•„ìš”í•œ ê·¸ë£¹ì„ ê³¨ë¼ì„œ ì¡°íšŒ ê°€ëŠ¥ 
    - @XToOne(OneToOne, ManyToOne) ê´€ê³„ëŠ” ê¸°ë³¸ì´ ì¦‰ì‹œë¡œë”©ì´ë¯€ë¡œ ì§ì ‘ ì§€ì—°ë¡œë”©ìœ¼ë¡œ ì„¤ì •!


<br>

4. ì»¬ë ‰ì…˜ì€ í•„ë“œì—ì„œ ì´ˆê¸°í™”
```
    @OneToMany(mappedBy = "member")
    private List<Order> orders = new ArrayList<>();
```
- null ë¬¸ì œì—ì„œ ì•ˆì „í•¨

<br>

5. í…Œì´ë¸”, ì»¬ëŸ¼ëª… ìƒì„± ì „ëµ

- ìŠ¤í”„ë§ ë¶€íŠ¸ ê¸°ë³¸ ì„¤ì • (ì—”í‹°í‹°(í•„ë“œ) í…Œì´ë¸”(ì»¬ëŸ¼))
    1. ì¹´ë©œ ì¼€ì´ìŠ¤ ì–¸ë”ìŠ¤ì½”ì–´(memberPoint member_point)
    2. .(ì ) _(ì–¸ë”ìŠ¤ì½”ì–´)
    3. ëŒ€ë¬¸ì ì†Œë¬¸ì

<br>

6. cascade = CascadeType.ALL)
    ```
        public class Order {

        ...

        @OneToMany(mappedBy = "order", cascade = CascadeType.ALL)
        private List<OrderItem> orderItems = new ArrayList<>();
    }
    ```
- cashcadeë¥¼ ì•ˆí–ˆì„ë•Œ 
    ```
    persist(orderItemA)
    persist(orderItemB)
    persist(order)
    ```
    ë¥¼ í•´ì•¼í•˜ì§€ë§Œ

- cashcadeë¥¼ í•˜ë©´
```persist(order)```
ë§Œ í•´ë„ ë¨ -> persistë¥¼ ì „íŒŒí•¨!(allì´ë¯€ë¡œ deleteí• ë•Œë„ ë‹¤ ì „íŒŒí•¨)

- ëª¨ë“  entityëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì €ì¥í•˜ê³  ì‹¶ìœ¼ë©´ ê°ê° persistí•´ì•¼í•˜ì§€ë§Œ cashcadeí•˜ë©´ ì „íŒŒë˜ì–´ ê°™ì´ persist í˜¸ì¶œë¨

<br>

6. ì—°ê´€ê´€ê³„ í¸ì˜ ë©”ì†Œë“œ
- ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ì¼ë•Œ ì‚¬ìš©

```
    //== ì—°ê´€ê´€ê³„ ë©”ì†Œë“œ ==//
    public void setMember(Member member){
        this.member = member;
        member.getOrders().add(this);
        // orderì— memberë¥¼ ì…‹íŒ…í• ë•Œ í•œë²ˆì— memberì˜ orderë„ ì´ ê°ì²´ë¡œ ì…‹íŒ…ë¨
    }

    public void addOrderItem(OrderItem orderItem){
        orderItems.add(orderItem);
        orderItem.setOrder(this);
    }
    
    public void setDelivery(Delivery delivery){
        this.delivery = delivery;
        delivery.setOrder(this);
    }
```
- ìœ„ì¹˜ëŠ” controll í•˜ëŠ”ìª½ì´ ê°–ê³ ìˆëŠ”ê²Œ ì¢‹ìŒ
- ì–‘ìª½ ì…‹íŒ…ì„ ì›ìì ìœ¼ë¡œ í•œ ì½”ë“œë¡œ í•¨